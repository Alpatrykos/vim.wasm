<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>Vim.Wasm</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="vim-editor">
      <canvas id="vim-screen"></canvas>
      <canvas id="vim-cursor"></canvas>
      <input id="vim-input" autocomplete="off" autofocus />
      <span id="vim-preedit"></span>
    </div>
    <script>
      var Module = {
        preRun: [],
        postRun: [],
        print: console.log,
        printErr: console.error,
      };
      var debug = console.log;

      if (!('serviceWorker' in navigator)) {
          throw Exception('This browser does not support ServiceWorker. This site does not work!!');
      }

      navigator.serviceWorker
          .register('/sw.js')
          .then(function(registration) {
              debug('ServiceWorker registration successful with scope: ', registration.scope);
          })
          .catch(function(err) {
              console.error('ServiceWorker registration failed: ', err);
          });
    </script>
    {{{ SCRIPT }}}
  </body>
</html>
